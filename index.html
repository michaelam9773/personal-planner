<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Session Planner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Trebuchet MS', sans-serif;
            background: linear-gradient(135deg, #FFF8F0 0%, #F5EBE0 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #FFF8F0 0%, #F5EBE0 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 0.5s ease-out 2s forwards;
        }

        .intro-logo {
            position: relative;
            width: 200px;
            height: 200px;
            animation: logoScale 1.5s ease-out forwards;
        }

        @keyframes logoScale {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .intro-ring {
            position: absolute;
            border-radius: 50%;
            border: 4px solid;
        }

        .intro-ring-1 {
            width: 200px;
            height: 200px;
            border-color: #FFB6C1;
            top: 0;
            left: 0;
            animation: expandRing 1.2s ease-out 0.3s forwards;
        }

        .intro-ring-2 {
            width: 142px;
            height: 142px;
            border-color: #B2D3A8;
            top: 29px;
            left: 29px;
            animation: expandRing 1.2s ease-out 0.5s forwards;
        }

        .intro-ring-3 {
            width: 84px;
            height: 84px;
            border-color: #E6E6FA;
            top: 58px;
            left: 58px;
            animation: expandRing 1.2s ease-out 0.7s forwards;
        }

        @keyframes expandRing {
            0% { transform: scale(0); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        @keyframes fadeOut {
            to { opacity: 0; visibility: hidden; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            position: relative;
            width: 100px;
            height: 100px;
            margin: 0 auto 15px;
        }

        .ring {
            position: absolute;
            border-radius: 50%;
            border: 3px solid;
        }

        .ring-1 { width: 100px; height: 100px; border-color: #FFB6C1; top: 0; left: 0; }
        .ring-2 { width: 71px; height: 71px; border-color: #B2D3A8; top: 14.5px; left: 14.5px; }
        .ring-3 { width: 42px; height: 42px; border-color: #E6E6FA; top: 29px; left: 29px; }

        h1 {
            color: #8B4789;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .btn-primary { background: linear-gradient(135deg, #FFB6C1, #FFD1DC); color: white; }
        .btn-secondary { background: linear-gradient(135deg, #B2D3A8, #C8E6C9); color: white; }
        .btn-tertiary { background: linear-gradient(135deg, #E6E6FA, #F0E6FA); color: #8B4789; }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .week-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .day-column {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .day-header {
            font-size: 1.3em;
            color: #8B4789;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #FFB6C1;
        }

        .session {
            background: #FFF8F0;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #B2D3A8;
        }

        .session-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .session-time {
            font-weight: bold;
            color: #8B4789;
        }

        .delete-session {
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 14px;
        }

        .assignment-card {
            background: white;
            padding: 10px;
            margin: 8px 0;
            border-radius: 8px;
            cursor: move;
            border-left: 4px solid;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .assignment-card:hover {
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            transform: translateX(5px);
        }

        .assignment-card.dragging { opacity: 0.5; }
        .assignment-card.completed { opacity: 0.6; }
        .assignment-card.completed .assignment-subject { text-decoration: line-through; }

        .assignment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .assignment-subject {
            font-weight: bold;
            color: #333;
        }

        .assignment-actions {
            display: flex;
            gap: 5px;
        }

        .delete-assignment {
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .complete-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .assignment-details {
            font-size: 0.9em;
            color: #666;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active { display: flex; }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal h2 {
            color: #8B4789;
            margin-bottom: 20px;
        }

        .form-group { margin-bottom: 15px; }

        label {
            display: block;
            margin-bottom: 5px;
            color: #8B4789;
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #E6E6FA;
            border-radius: 8px;
            font-size: 14px;
        }

        .color-picker {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .color-option.selected {
            border-color: #8B4789;
            transform: scale(1.2);
        }

        .class-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .class-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #FFF8F0;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .sidebar {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .widget {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 280px;
        }

        .widget h3 {
            color: #8B4789;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .music-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #E6E6FA, #F0E6FA);
            border: none;
            border-radius: 10px;
            color: #8B4789;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 10px;
        }

        .notes-widget textarea {
            width: 100%;
            min-height: 150px;
            border: 2px solid #E6E6FA;
            border-radius: 8px;
            padding: 10px;
            resize: vertical;
            font-family: 'Trebuchet MS', sans-serif;
        }

        @media (max-width: 1200px) {
            .sidebar {
                position: static;
                transform: none;
                margin: 20px auto;
                width: 100%;
                max-width: 500px;
            }
            .widget { width: 100%; }
        }

        .drop-zone {
            min-height: 50px;
            border: 2px dashed #E6E6FA;
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
        }

        .drop-zone.drag-over {
            background: #F0E6FA;
            border-color: #8B4789;
        }
    </style>
</head>
<body>
    <div class="intro-overlay">
        <div class="intro-logo">
            <div class="intro-ring intro-ring-1"></div>
            <div class="intro-ring intro-ring-2"></div>
            <div class="intro-ring intro-ring-3"></div>
        </div>
    </div>

    <div class="container">
        <header>
            <div class="logo">
                <div class="ring ring-1"></div>
                <div class="ring ring-2"></div>
                <div class="ring ring-3"></div>
            </div>
            <h1>Hi, Michaela! 💕</h1>
        </header>

        <div class="controls">
            <button class="btn btn-primary" onclick="openSessionModal()">+ Add Study Session</button>
            <button class="btn btn-secondary" onclick="openAssignmentModal()">+ Add Assignment</button>
            <button class="btn btn-tertiary" onclick="openClassModal()">Manage Classes</button>
            <a href="https://docs.google.com/spreadsheets/d/1lv3ZFYeIgOlpxFyeiUWi-C2MmR4n6kqi1pqMSdbt2zU/edit?gid=0#gid=0" target="_blank" class="btn btn-tertiary" style="text-decoration: none;">📋 Assignments Sheet</a>
        </div>

        <div class="week-grid" id="weekGrid"></div>

        <div class="sidebar">
            <div class="widget music-player">
                <h3>🎵 Study Music</h3>
                <a href="https://www.youtube.com/watch?v=jfKfPfyJRdk" target="_blank" class="music-btn">Classical Study Music</a>
                <a href="https://www.youtube.com/watch?v=5qap5aO4i9A" target="_blank" class="music-btn">Lofi Hip Hop</a>
            </div>

            <div class="widget notes-widget">
                <h3>Quick Notes</h3>
                <textarea id="quickNotes" placeholder="Jot down quick reminders..." oninput="saveNotes()"></textarea>
            </div>
        </div>
    </div>

    <div id="sessionModal" class="modal">
        <div class="modal-content">
            <h2>Add Study Session</h2>
            <div class="form-group">
                <label>Session Name</label>
                <input type="text" id="sessionName" placeholder="e.g., Morning Study Block">
            </div>
            <div class="form-group">
                <label>Day</label>
                <select id="sessionDay">
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                    <option value="Saturday">Saturday</option>
                    <option value="Sunday">Sunday</option>
                </select>
            </div>
            <div class="form-group">
                <label>Time</label>
                <input type="time" id="sessionTime">
            </div>
            <div class="form-group">
                <label>Duration (minutes)</label>
                <input type="number" id="sessionDuration" value="60">
            </div>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn btn-primary" onclick="addSession()">Add Session</button>
                <button class="btn btn-secondary" onclick="closeModal('sessionModal')">Cancel</button>
            </div>
        </div>
    </div>

    <div id="assignmentModal" class="modal">
        <div class="modal-content">
            <h2>Add Assignment</h2>
            <div class="form-group">
                <label>Class</label>
                <select id="assignmentClass"></select>
            </div>
            <div class="form-group">
                <label>Assignment Name</label>
                <input type="text" id="assignmentName" placeholder="e.g., Chapter 5 Review">
            </div>
            <div class="form-group">
                <label>Priority</label>
                <select id="assignmentPriority">
                    <option value="High">High</option>
                    <option value="Medium">Medium</option>
                    <option value="Low">Low</option>
                </select>
            </div>
            <div class="form-group">
                <label>Estimated Time (minutes)</label>
                <input type="number" id="assignmentTime" value="30">
            </div>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn btn-primary" onclick="addAssignment()">Add Assignment</button>
                <button class="btn btn-secondary" onclick="closeModal('assignmentModal')">Cancel</button>
            </div>
        </div>
    </div>

    <div id="classModal" class="modal">
        <div class="modal-content">
            <h2>Manage Classes</h2>
            <div class="form-group">
                <label>Class Name</label>
                <input type="text" id="newClassName" placeholder="e.g., Biology">
            </div>
            <div class="form-group">
                <label>Color</label>
                <div class="color-picker">
                    <div class="color-option selected" style="background: #FFB6C1;" onclick="selectColor('#FFB6C1')"></div>
                    <div class="color-option" style="background: #B2D3A8;" onclick="selectColor('#B2D3A8')"></div>
                    <div class="color-option" style="background: #E6E6FA;" onclick="selectColor('#E6E6FA')"></div>
                    <div class="color-option" style="background: #87CEEB;" onclick="selectColor('#87CEEB')"></div>
                    <div class="color-option" style="background: #FFD700;" onclick="selectColor('#FFD700')"></div>
                    <div class="color-option" style="background: #FF9999;" onclick="selectColor('#FF9999')"></div>
                    <div class="color-option" style="background: #DDA0DD;" onclick="selectColor('#DDA0DD')"></div>
                    <div class="color-option" style="background: #98D8C8;" onclick="selectColor('#98D8C8')"></div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="addClass()" style="margin-bottom: 20px;">Add Class</button>
            <div class="class-list" id="classList"></div>
            <button class="btn btn-secondary" onclick="closeModal('classModal')" style="margin-top: 20px; width: 100%;">Close</button>
        </div>
    </div>

    <script>
        let data = {
            sessions: [],
            assignments: [],
            classes: [
                { name: 'Mathematics', color: '#FFB6C1' },
                { name: 'Science', color: '#B2D3A8' },
                { name: 'English', color: '#E6E6FA' },
                { name: 'History', color: '#87CEEB' }
            ]
        };
        
        let selectedClassColor = '#FFB6C1';
        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];

        function loadData() {
            const saved = localStorage.getItem('studyPlannerData');
            if (saved) {
                data = JSON.parse(saved);
            }
        }

        function saveData() {
            localStorage.setItem('studyPlannerData', JSON.stringify(data));
        }

        function formatTime(time24) {
            const [hours, minutes] = time24.split(':');
            const hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const hour12 = hour % 12 || 12;
            return hour12 + ':' + minutes + ' ' + ampm;
        }

        function calculateEndTime(startTime, duration) {
            const [hours, minutes] = startTime.split(':');
            const startDate = new Date();
            startDate.setHours(parseInt(hours), parseInt(minutes), 0);
            startDate.setMinutes(startDate.getMinutes() + duration);
            
            const endHours = startDate.getHours();
            const endMinutes = startDate.getMinutes().toString().padStart(2, '0');
            const endTime = endHours + ':' + endMinutes;
            
            return formatTime(endTime);
        }

        function createAssignmentCard(assignment) {
            const card = document.createElement('div');
            card.className = 'assignment-card';
            if (assignment.completed) card.classList.add('completed');
            
            const assignmentClass = data.classes.find(c => c.name === assignment.class);
            const classColor = assignmentClass ? assignmentClass.color : '#FFB6C1';
            card.style.borderColor = classColor;
            card.style.boxShadow = '0 2px 8px ' + classColor + '40';
            
            card.draggable = true;

            card.ondragstart = function(e) {
                e.dataTransfer.setData('text/plain', assignment.id);
                card.classList.add('dragging');
            };

            card.ondragend = function() {
                card.classList.remove('dragging');
            };

            const header = document.createElement('div');
            header.className = 'assignment-header';

            const subject = document.createElement('div');
            subject.className = 'assignment-subject';
            subject.textContent = assignment.class;
            header.appendChild(subject);

            const actions = document.createElement('div');
            actions.className = 'assignment-actions';

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.className = 'complete-checkbox';
            checkbox.checked = assignment.completed || false;
            checkbox.onchange = function() { toggleComplete(assignment.id); };
            actions.appendChild(checkbox);

            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'delete-assignment';
            deleteBtn.textContent = '×';
            deleteBtn.onclick = function() { deleteAssignment(assignment.id); };
            actions.appendChild(deleteBtn);

            header.appendChild(actions);
            card.appendChild(header);

            const details = document.createElement('div');
            details.className = 'assignment-details';
            details.textContent = assignment.name + ' • ' + assignment.priority + ' • ' + assignment.time + 'min';
            card.appendChild(details);

            return card;
        }

        function renderWeek() {
            const grid = document.getElementById('weekGrid');
            grid.innerHTML = '';

            days.forEach(function(day) {
                const column = document.createElement('div');
                column.className = 'day-column';

                const header = document.createElement('div');
                header.className = 'day-header';
                header.textContent = day;
                column.appendChild(header);

                const daySessions = data.sessions.filter(function(s) { return s.day === day; });
                
                if (daySessions.length === 0) {
                    const emptyMsg = document.createElement('div');
                    emptyMsg.style.padding = '20px';
                    emptyMsg.style.textAlign = 'center';
                    emptyMsg.style.color = '#999';
                    emptyMsg.style.fontSize = '0.9em';
                    emptyMsg.textContent = 'No sessions yet';
                    column.appendChild(emptyMsg);
                }
                
                daySessions.forEach(function(session) {
                    const sessionEl = document.createElement('div');
                    sessionEl.className = 'session';

                    const sessionHeader = document.createElement('div');
                    sessionHeader.className = 'session-header';

                    const timeEl = document.createElement('div');
                    timeEl.className = 'session-time';
                    const sessionTitle = session.name ? session.name + ' - ' : '';
                    const endTime = calculateEndTime(session.time, session.duration);
                    timeEl.textContent = sessionTitle + formatTime(session.time) + ' - ' + endTime;
                    sessionHeader.appendChild(timeEl);

                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'delete-session';
                    deleteBtn.textContent = '×';
                    deleteBtn.onclick = function() { deleteSession(session.id); };
                    sessionHeader.appendChild(deleteBtn);

                    sessionEl.appendChild(sessionHeader);

                    const dropZone = document.createElement('div');
                    dropZone.className = 'drop-zone';
                    
                    const sessionAssignments = data.assignments.filter(function(a) { return a.sessionId === session.id; });
                    sessionAssignments.forEach(function(assignment) {
                        dropZone.appendChild(createAssignmentCard(assignment));
                    });

                    dropZone.ondragover = function(e) {
                        e.preventDefault();
                        dropZone.classList.add('drag-over');
                    };

                    dropZone.ondragleave = function() {
                        dropZone.classList.remove('drag-over');
                    };

                    dropZone.ondrop = function(e) {
                        e.preventDefault();
                        dropZone.classList.remove('drag-over');
                        const assignmentId = e.dataTransfer.getData('text/plain');
                        moveAssignment(assignmentId, session.id);
                    };

                    sessionEl.appendChild(dropZone);
                    column.appendChild(sessionEl);
                });

                grid.appendChild(column);
            });

            renderUnscheduledAssignments();
        }

        function renderUnscheduledAssignments() {
            const grid = document.getElementById('weekGrid');
            const unscheduled = data.assignments.filter(function(a) { return !a.sessionId; });
            
            if (unscheduled.length > 0) {
                const column = document.createElement('div');
                column.className = 'day-column';
                column.style.gridColumn = '1 / -1';

                const header = document.createElement('div');
                header.className = 'day-header';
                header.textContent = 'Unscheduled Assignments';
                column.appendChild(header);

                const dropZone = document.createElement('div');
                dropZone.className = 'drop-zone';
                dropZone.style.display = 'grid';
                dropZone.style.gridTemplateColumns = 'repeat(auto-fill, minmax(250px, 1fr))';
                dropZone.style.gap = '10px';

                unscheduled.forEach(function(assignment) {
                    dropZone.appendChild(createAssignmentCard(assignment));
                });

                dropZone.ondragover = function(e) {
                    e.preventDefault();
                    dropZone.classList.add('drag-over');
                };

                dropZone.ondragleave = function() {
                    dropZone.classList.remove('drag-over');
                };

                dropZone.ondrop = function(e) {
                    e.preventDefault();
                    dropZone.classList.remove('drag-over');
                    const assignmentId = e.dataTransfer.getData('text/plain');
                    moveAssignment(assignmentId, null);
                };

                column.appendChild(dropZone);
                grid.appendChild(column);
            }
        }

        function deleteAssignment(assignmentId) {
            if (confirm('Delete this assignment?')) {
                data.assignments = data.assignments.filter(function(a) { return a.id !== assignmentId; });
                saveData();
                renderWeek();
            }
        }

        function moveAssignment(assignmentId, newSessionId) {
            const assignment = data.assignments.find(function(a) { return a.id === assignmentId; });
            if (assignment) {
                assignment.sessionId = newSessionId;
                saveData();
                renderWeek();
            }
        }

        function toggleComplete(assignmentId) {
            const assignment = data.assignments.find(function(a) { return a.id === assignmentId; });
            if (assignment) {
                assignment.completed = !assignment.completed;
                saveData();
                renderWeek();
            }
        }

        function openSessionModal() {
            document.getElementById('sessionModal').classList.add('active');
        }

        function openAssignmentModal() {
            const select = document.getElementById('assignmentClass');
            select.innerHTML = data.classes.map(function(c) {
                return '<option value="' + c.name + '">' + c.name + '</option>';
            }).join('');
            document.getElementById('assignmentModal').classList.add('active');
        }

        function openClassModal() {
            renderClassList();
            document.getElementById('classModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function addSession() {
            const name = document.getElementById('sessionName').value;
            const day = document.getElementById('sessionDay').value;
            const time = document.getElementById('sessionTime').value;
            const duration = document.getElementById('sessionDuration').value;

            if (time) {
                data.sessions.push({
                    id: Date.now().toString(),
                    name: name,
                    day: day,
                    time: time,
                    duration: parseInt(duration)
                });
                saveData();
                renderWeek();
                closeModal('sessionModal');
                document.getElementById('sessionName').value = '';
                document.getElementById('sessionTime').value = '';
            }
        }

        function deleteSession(sessionId) {
            if (confirm('Delete this study session? Assignments will be moved to unscheduled.')) {
                data.sessions = data.sessions.filter(function(s) { return s.id !== sessionId; });
                data.assignments.forEach(function(a) {
                    if (a.sessionId === sessionId) {
                        a.sessionId = null;
                    }
                });
                saveData();
                renderWeek();
            }
        }

        function addAssignment() {
            const className = document.getElementById('assignmentClass').value;
            const name = document.getElementById('assignmentName').value;
            const priority = document.getElementById('assignmentPriority').value;
            const time = document.getElementById('assignmentTime').value;

            if (name) {
                data.assignments.push({
                    id: Date.now().toString(),
                    class: className,
                    name: name,
                    priority: priority,
                    time: parseInt(time),
                    sessionId: null,
                    completed: false
                });
                saveData();
                renderWeek();
                closeModal('assignmentModal');
                document.getElementById('assignmentName').value = '';
            }
        }

        function selectColor(color) {
            selectedClassColor = color;
            document.querySelectorAll('.color-option').forEach(function(el) {
                el.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        function addClass() {
            const name = document.getElementById('newClassName').value;
            if (name) {
                data.classes.push({ name: name, color: selectedClassColor });
                document.getElementById('newClassName').value = '';
                saveData();
                renderClassList();
            }
        }

        function renderClassList() {
            const list = document.getElementById('classList');
            list.innerHTML = data.classes.map(function(cls, index) {
                return '<div class="class-item" style="border-color: ' + cls.color + '"><span>' + cls.name + '</span><button class="delete-session" onclick="deleteClass(' + index + ')">×</button></div>';
            }).join('');
        }

        function deleteClass(index) {
            const className = data.classes[index].name;
            if (confirm('Delete ' + className + '? Assignments for this class will remain.')) {
                data.classes.splice(index, 1);
                saveData();
                renderClassList();
            }
        }

        function saveNotes() {
            const notes = document.getElementById('quickNotes').value;
            localStorage.setItem('studyPlannerNotes', notes);
        }

        function loadNotes() {
            const notes = localStorage.getItem('studyPlannerNotes');
            if (notes) {
                document.getElementById('quickNotes').value = notes;
            }
        }

        loadData();
        renderWeek();
        loadNotes();

        document.querySelectorAll('.modal').forEach(function(modal) {
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
